function importCSV(t){t.stopPropagation(t),t.preventDefault(t);var e=t.dataTransfer.files,a=e.length;switch(a){case 1:parseFiles(e),warningImportCSV.style.display="none";break;default:warningImportCSV.style.display="block"}}function parseFiles(t){var e=t[0],a=e.name,r=a.replace(/^.*\./,"");switch(r){case"csv":case"txt":errorImportCSV.style.display="none";var n=new FileReader;n.readAsText(e,"UTF-8"),n.onload=handleReaderLoad;break;default:errorImportCSV.style.display="block"}}function handleReaderLoad(t){var e=t.target.result;dropImportCSV.value=e.split(";")}var collectionHolder=$("table.participants tbody"),dropImportCSV=document.getElementById("importCSV"),errorImportCSV=document.getElementById("errorImportCSV"),warningImportCSV=document.getElementById("warningImportCSV");jQuery(document).ready(function(){$(".add-import-participant").click(function(t){t.preventDefault(),$(".row-import-participants").show(300)}),$(".btn-import-cancel").click(function(t){t.preventDefault(),$("#importCSV").val(""),$("#errorImportCSV").hide(),$("#warningImportCSV").hide(),$(".row-import-participants").hide(300)}),$(".add-import-participant-do").click(function(t){t.preventDefault();var e=$.csv.toArrays($(".add-import-participant-data").val(),{headers:!1,seperator:",",delimiter:'"'});if("undefined"!=typeof e[0]){-1==e[0][1].indexOf("@")&&e.splice(0,1);var a=0,r=!0;for(var n in e){var i="",o="";for(var p in e[n])""==i&&-1!=e[n][p].indexOf("@")?i=e[n][p]:o=e[n][p];""!=i&&(""==o&&(o=i),r?(elem=$(collectionHolder).find('.participant-name[value=""],.participant-name:not([value])'),elem.length>0?(row=$(elem[0]).parent().parent(),$(row).find(".participant-name").attr("value",o),$(row).find(".participant-mail").attr("value",i)):(r=!1,addNewParticipant(collectionHolder,i,o))):addNewParticipant(collectionHolder,i,o),a++)}a>0&&($(".add-import-participant-data").val(""),$(".row-import-participants").hide(300))}}),$(".add-import-participant-data").change(function(){data=$(this).val().replace(/\t/g,",").replace(/;/g,","),data!=$(this).text()&&$(this).val(data)})}),dropImportCSV.addEventListener("dragenter",function(t){t.stopPropagation(t),t.preventDefault(t)}),dropImportCSV.addEventListener("dragover",function(t){return t.stopPropagation(t),t.preventDefault(t),!1}),dropImportCSV.addEventListener("drop",importCSV,!1);
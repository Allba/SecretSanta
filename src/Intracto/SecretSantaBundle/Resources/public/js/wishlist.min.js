function addNewEntry(e){$(".noitems").remove();var t=e.attr("data-prototype"),n=e.children().length,o=t.replace(/__name__/g,n).replace(/__entrycount__/g,n+1),r=$(o);e.append(r),r.show(300),bindDeleteButtonEvents(),$(".remove-entry").removeClass("disabled"),resetRanks()}function bindDeleteButtonEvents(){$("button.remove-entry").each(function(){$(this).off("click"),$(this).click(function(e){e.preventDefault(),$(this).parents("tr.wishlistitem").remove(),resetRanks()})})}function resetRanks(){$("table.entries tbody tr").each(function(e){$(this).find('td input[type="hidden"]').val(e+1),$(this).find("td span.rank").text(e+1)})}var collectionHolder=$("table.entries tbody");jQuery(document).ready(function(){$(".add-new-entry").click(function(e){e.preventDefault(),addNewEntry(collectionHolder)}),bindDeleteButtonEvents(),$(".remove-entry").removeClass("disabled"),$("table.entries tbody").sortable({stop:function(){resetRanks()}}),$("table.entries tbody").bind("click.sortable mousedown.sortable",function(e){e.target.focus()})});